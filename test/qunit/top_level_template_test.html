<html>
<head>
    <meta charset="utf-8">

    <title>Skybill</title>

    <link rel="stylesheet" href="qunit-1.18.0.css"/>
    <script src="qunit-1.18.0.js"></script>

    <link rel="stylesheet" href="../../public/css/jquery-ui-1.11.0/jquery-ui.css"/>
    <link rel="stylesheet" href="../../public/css/jquery-ui-1.11.0/jquery-ui.structure.css"/>
    <link rel="stylesheet" href="../../public/css/jquery-ui-1.11.0/jquery-ui.theme.css"/>

    <script src="../../public/javascript/jquery-1.11.1.js"></script>
    <script src="../../public/javascript/jquery-ui-1.11.0/jquery-ui.js"></script>
    <script src="../../public/javascript/handlebars-v1.3.0.js"></script>

    <!-- Note that this MUST go before the QUnit code otherwise it doesn't seem to get picked up -->
    <script src="../../public/javascript/skybill.js"></script>

    <script>
        QUnit.test("Check we have a top-level template loaded", function(assert) {
            var template = $('#topLevelTemplateHtml');
            var templateHtml = template.html();
            assert.ok(templateHtml, "Template has been loaded");
            assert.ok(templateHtml.length>0, "The template html is non-zero size");
            console.log("Template: " + templateHtml + "\nTemplate size: " + templateHtml.length);
            assert.ok(window.topLevelTemplate, "The template hasn't been parsed by the startup script");
            console.log()
        });

        QUnit.test("Render top-level template with Statement node", function(assert) {
            var statementObject = {
              statement: {
                  generated: "2015-01-12",
                  due: "2015-01-25",
                  period: {
                      from: "2015-01-26",
                      to: "2015-02-25"
                  }
              }
            };

            renderTemplate(window.topLevelTemplate, statementObject, "templateTarget");

            var skyBillHtml = $('#skyBill').html;
            var statementHtml = $('#statement').html;

            assert.ok(skyBillHtml, "Check that there is a top level skyBill div");
            assert.ok(statementHtml, "Check that there is a statement div");

            var targetContent = $('#templateTarget').html();
            console.log("Content: "+targetContent);
            var dateContents = $('#statement div span.date');
            //console.log("Date contents: " + dateContents.html);
        });
    </script>
</head>

<body>
<h1>Top Level Template Test</h1>

<div id="qunit"></div>

<!-- Used to output templates -->
<div id="templateTarget"/>


</body>
</html>
